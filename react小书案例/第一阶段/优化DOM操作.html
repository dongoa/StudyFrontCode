<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<style type="text/css">
	div{
		display: inline-block;
	}
</style>
<body>
	<div class="wrapper">
	</div>
	<p>
		1.ä¸ºä»€ä¹ˆè¦ä¼˜åŒ–ï¼Ÿä»£ç ä¸­æ··æ‚äº†DOMæ“ä½œï¼Œæ‰‹åŠ¨ç®¡ç†æ•°æ®å’Œdomä¹‹é—´çš„å…³ç³»ä¼šå¯¼è‡´ä»£ç å¯ç»´æŠ¤æ€§å˜å·®ï¼Œæ‰€ä»¥è¦å°½é‡å‡å°‘æ‰‹åŠ¨çš„domæ“ä½œ<br>
		2.ä¸€ç§è§£å†³æ–¹æ¡ˆï¼ŒçŠ¶æ€æ”¹å˜åé‡æ–°è°ƒç”¨renderæ–¹æ³•ï¼Œæ„å»ºä¸€ä¸ªæ–°çš„domå…ƒç´ <br>
		3.æŠŠæ”¹å˜çš„æ–°DOMå…ƒç´ é‡æ–°æ’å…¥ï¼Œåœ¨å¤–éƒ¨æ·»åŠ äº†ä¸€ä¸ªonstatechangeå‡½æ•°
	</p>
<script type="text/javascript">
	const createDOMFromString = (domString) => {
		const div = document.createElement('div');
		div.innerHTML = domString
		return div
	}
	class LikeButton{
		constructor(){
			this.state = { isLiked:false }
		}
		setState(state){
			const oldEl = this.el
			this.state = state
			this.el = this.render()
			console.log(this.onStateChange,this.el)
			if(this.onStateChange) this.onStateChange(oldEl,this.el);
		}
		changeLikeText(){
			this.setState({
				isLiked: !this.state.isLiked
			})
		}
		render(){
			this.el = createDOMFromString(`
			<button class="like-btn">
			<span class="like-text">${this.state.isLiked ? 'å–æ¶ˆ':'ç‚¹èµ'}</span>
			<span class='like-icon'>ğŸ‘</span>
			</button>
			`)
			this.el.addEventListener('click',this.changeLikeText.bind(this),false)
			return this.el
		}
	}
	const wrapper = document.querySelector('.wrapper');
	const likeButton1 = new LikeButton();
	wrapper.appendChild(likeButton1.render());
	likeButton1.onStateChange = (oldEl,newEl)=>{
		wrapper.insertBefore(newEl,oldEl)
		wrapper.removeChild(oldEl)
	}
	const likeButton2 = new LikeButton();
	wrapper.appendChild(likeButton2.render());
	///å®ç°ç®€å•çš„ç»„ä»¶åŒ–
</script>
</body>
</html>
